---
title: 权重随机数
tags: [js, 随机数]
banner_img: /img/banner.jpg
index_img: /img/javascript.png
date: 2020-08-07 14:18:26
---

### 缘由
由于公司要求每年都需要做人才盘点，对同事打分，但是由于题目众多，大家都是疲于应付。随便选应付了事。受同事之托能否写脚本并且按照权重打分。为此思考了一下关于权重随机数的相关思路
### 代码

```js
function formatConfig(config) {
  let sortArray = Object.keys(config)
    .sort((a, b) => config[a] - config[b])
    .reduce((pre, cur) => {
      let preValue = pre.length == 0 ? 0 : pre[pre.length - 1].between[1];
      return [
        ...pre,
        {
          key: cur,
          between: [preValue, preValue +  config[cur]]
        }
      ];
    }, []);
  sortArray.forEach(i => {
    console.log(`${i.key}::::::::>>>>${i.between[0]}-${i.between[1]}`);
  });
  return sortArray;
}
function getRandom(sortArray) {
  let random = Math.random() * 100;
  console.log(random);
  for (let keys in sortArray) {
    let [min, max] = sortArray[keys].between;
    if (random > min && random <= max) {
      return sortArray[keys].key;
    }
  }
}
let sortArray = formatConfig({
  "1.0": 0,
  "2.0": 0,
  "3.0": 30,
  "4.0": 50,
  "5.0": 20
});
$(".radio_option").each((i, e) => {
  let score = getRandom(sortArray);
  $(e)
    .find("[type=radio]")
    .each((ii, el) => {
      if (JSON.parse($(el).attr("d-data")).score == score) {
        $(el).prop("checked", true);
      }
    });
});

```

